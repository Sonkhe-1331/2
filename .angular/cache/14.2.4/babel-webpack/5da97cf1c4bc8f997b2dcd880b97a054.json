{"ast":null,"code":"import _classCallCheck from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { formatDate } from '@angular/common';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { MatSelect } from '@angular/material/select';\nimport { AuthService } from 'app/auth/auth.service';\nimport { RoomService } from 'app/services/room.service';\nimport { BehaviorSubject, ReplaySubject, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/room.service\";\nimport * as i2 from \"app/auth/auth.service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/select\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/material/datepicker\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"ngx-mat-select-search\";\nimport * as i13 from \"@angular/material/progress-spinner\";\nimport * as i14 from \"@angular/material/chips\";\nvar _c0 = [\"multiSelect\"];\n\nfunction BookingComponent_mat_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var item_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r7.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r7.name, \" \");\n  }\n}\n\nfunction BookingComponent_mat_option_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var amenity_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", amenity_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", amenity_r8.Name, \" \");\n  }\n}\n\nfunction BookingComponent_mat_spinner_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction BookingComponent_ng_template_56_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵtext(3, \"No rooms available for the selected days.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction BookingComponent_ng_template_56_div_1_ul_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var amenity_r14 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(amenity_r14);\n  }\n}\n\nfunction BookingComponent_ng_template_56_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"h4\", 32);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 33)(5, \"i\", 34);\n    i0.ɵɵtext(6, \"warning\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"a\", 35);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 36)(10, \"div\", 20)(11, \"mat-chip\", 37);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"h5\", 32);\n    i0.ɵɵtext(14, \"Amenities \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, BookingComponent_ng_template_56_div_1_ul_15_Template, 3, 1, \"ul\", 38);\n    i0.ɵɵelementStart(16, \"div\", 20)(17, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function BookingComponent_ng_template_56_div_1_Template_button_click_17_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r16);\n      var room_r12 = restoredCtx.$implicit;\n      var ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.Book(room_r12.id);\n    });\n    i0.ɵɵtext(18, \"Book Room\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    var room_r12 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(room_r12.roomName);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", room_r12.numberOfAvailableRooms, \" Rooms Available\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"R\", room_r12.rate, \" Per Day\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", room_r12.Amenities);\n  }\n}\n\nfunction BookingComponent_ng_template_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, BookingComponent_ng_template_56_ng_container_0_Template, 4, 0, \"ng-container\", 28);\n    i0.ɵɵtemplate(1, BookingComponent_ng_template_56_div_1_Template, 19, 4, \"div\", 29);\n  }\n\n  if (rf & 2) {\n    var ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.roomsAvailable.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.roomsAvailable);\n  }\n}\n\nexport var BookingComponent = /*#__PURE__*/(function () {\n  var BookingComponent = /*#__PURE__*/function () {\n    function BookingComponent(roomService, auth) {\n      _classCallCheck(this, BookingComponent);\n\n      this.roomService = roomService;\n      this.auth = auth;\n      this.roomTypes = [];\n      this.amenities = [];\n      this.selectedAmenities = [];\n      this.roomsAvailable = [];\n      this.range = new FormGroup({\n        start: new FormControl(''),\n        end: new FormControl('')\n      });\n      /** control for the selected bank for multi-selection */\n\n      this.amenitiesMultiCtrl = new FormControl();\n      /** control for the MatSelect filter keyword multi-selection */\n\n      this.amenitiesMultiFilterCtrl = new FormControl();\n      /** list of banks filtered by search keyword */\n\n      this.filteredMulti = new ReplaySubject(1);\n      this.$loader = new BehaviorSubject(false);\n      /** Subject that emits when the component has been destroyed. */\n\n      this._onDestroy = new Subject();\n    }\n\n    _createClass(BookingComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        this.getAmenities();\n        this.getRoomsTypes();\n        this.amenitiesMultiFilterCtrl.valueChanges.pipe(takeUntil(this._onDestroy)).subscribe(function () {\n          _this.filterMulti();\n        });\n      }\n    }, {\n      key: \"onSelect\",\n      value: function onSelect(evt) {\n        this.roomTypeId = evt.value || null;\n      }\n    }, {\n      key: \"checkRoomAvailability\",\n      value: function checkRoomAvailability(range, amenities) {\n        var _this2 = this;\n\n        var dataRange = this.range.value;\n\n        if (this.roomTypeId != null && dataRange.start != null && dataRange.end != null) {\n          {\n            var newRanger = {\n              startDate: formatDate(new Date(dataRange.start), 'yyyy/MM/dd hh:mm:ss', 'en_US'),\n              endDate: formatDate(new Date(dataRange.end), 'yyyy/MM/dd hh:mm:ss', 'en_US')\n            };\n            amenities = amenities.map(function (amenity) {\n              return amenity.Id;\n            });\n            this.$loader.next(true);\n            this.roomService.checkRoomAvailability(this.roomTypeId, newRanger, amenities).subscribe(function (res) {\n              if (res) {\n                _this2.roomsAvailable = res;\n\n                _this2.$loader.next(false);\n              }\n            });\n          }\n        }\n      }\n    }, {\n      key: \"Book\",\n      value: function Book(roomId) {\n        var _this3 = this;\n\n        var dataRange = this.range.value;\n        var newRanger = {\n          startDate: formatDate(new Date(dataRange.start), 'yyyy/MM/dd hh:mm:ss', 'en_US'),\n          endDate: formatDate(new Date(dataRange.end), 'yyyy/MM/dd hh:mm:ss', 'en_US')\n        };\n        var book = Object.assign({\n          roomId: roomId,\n          userId: this.auth.getUserID\n        }, newRanger);\n        Swal.fire({\n          title: 'Are you sure you want to book for',\n          text: \"\".concat(newRanger.startDate, \" - \").concat(newRanger.endDate),\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#ff0000',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, book it!'\n        }).then(function (result) {\n          if (result.isConfirmed) {\n            _this3.roomService.bookRoom(book).subscribe(function (result) {\n              Swal.fire('Booked!', 'Room successfully booked.', 'success');\n            }, function (error) {});\n          }\n        });\n      } //function to get roomTypes\n\n    }, {\n      key: \"getRoomsTypes\",\n      value: function getRoomsTypes() {\n        var _this4 = this;\n\n        this.roomService.getRoomsTypes().subscribe(function (res) {\n          _this4.roomTypes = res;\n        });\n      } //function to get roomTypes\n\n    }, {\n      key: \"getAmenities\",\n      value: function getAmenities() {\n        var _this5 = this;\n\n        this.roomService.getAmenities().subscribe(function (res) {\n          _this5.filteredMulti.next(res);\n\n          _this5.amenities = res;\n        });\n      }\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this._onDestroy.next();\n\n        this._onDestroy.complete();\n      }\n    }, {\n      key: \"filterMulti\",\n      value: function filterMulti() {\n        if (!this.amenities) {\n          return;\n        } // get the search keyword\n\n\n        var search = this.amenitiesMultiFilterCtrl.value;\n\n        if (!search) {\n          this.filteredMulti.next(this.amenities.slice());\n          return;\n        } else {\n          search = search.toLowerCase();\n        } // filter the banks\n\n\n        this.filteredMulti.next(this.amenities.filter(function (bank) {\n          return bank.Name.toLowerCase().indexOf(search) > -1;\n        }));\n      }\n    }]);\n\n    return BookingComponent;\n  }();\n\n  BookingComponent.ɵfac = function BookingComponent_Factory(t) {\n    return new (t || BookingComponent)(i0.ɵɵdirectiveInject(i1.RoomService), i0.ɵɵdirectiveInject(i2.AuthService));\n  };\n\n  BookingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookingComponent,\n    selectors: [[\"app-booking\"]],\n    viewQuery: function BookingComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.multiSelect = _t.first);\n      }\n    },\n    decls: 58,\n    vars: 14,\n    consts: [[1, \"main-content\"], [1, \"container-fluid\"], [1, \"example-card\"], [\"mat-card-avatar\", \"\"], [1, \"row\"], [1, \"col\"], [1, \"m-2\"], [3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"fill\", 1, \"example-form-field\"], [3, \"rangePicker\", \"formGroup\"], [\"matStartDate\", \"\", \"formControlName\", \"start\", \"placeholder\", \"Start date\"], [\"matEndDate\", \"\", \"formControlName\", \"end\", \"placeholder\", \"End date\"], [\"matSuffix\", \"\", 3, \"for\"], [\"rangePicker\", \"\"], [\"mat-button\", \"\", \"matDateRangePickerCancel\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"matDateRangePickerApply\", \"\"], [\"placeholder\", \"Banks\", 3, \"formControl\", \"multiple\"], [\"multiSelect\", \"\"], [3, \"formControl\"], [1, \"d-grid\", \"gap-2\", \"d-md-flex\", \"justify-content-md-end\"], [\"mat-stroked-button\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [1, \"col-md-12\"], [1, \"justify-content-between\"], [4, \"ngIf\", \"ngIfElse\"], [\"cards\", \"\"], [3, \"value\"], [4, \"ngIf\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"card-header\", \"card-header-primary\"], [1, \"card-title\"], [1, \"card-category\"], [1, \"material-icons\", \"text-danger\"], [\"href\", \"#pablo\"], [1, \"card-body\"], [\"color\", \"primary\", \"selected\", \"\", 2, \"font-size\", \"16px\", \"font-weight\", \"bold\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-raised-button\", \"\", \"color\", \"danger\", 1, \"btn\", \"orange\", 3, \"click\"]],\n    template: function BookingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"mat-card\", 2)(3, \"mat-card-header\")(4, \"mat-icon\", 3);\n        i0.ɵɵtext(5, \"house\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-card-title\");\n        i0.ɵɵtext(7, \"Check Rooms Available\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"mat-card-subtitle\");\n        i0.ɵɵtext(9, \"Select the parameters to filter the learners\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"mat-card-content\")(11, \"div\", 4)(12, \"div\", 5)(13, \"div\")(14, \"mat-form-field\", 6)(15, \"mat-label\");\n        i0.ɵɵtext(16, \"Choose Room Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-select\", 7);\n        i0.ɵɵlistener(\"selectionChange\", function BookingComponent_Template_mat_select_selectionChange_17_listener($event) {\n          return ctx.onSelect($event);\n        });\n        i0.ɵɵtemplate(18, BookingComponent_mat_option_18_Template, 2, 2, \"mat-option\", 8);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(19, \"div\", 5)(20, \"mat-form-field\", 9)(21, \"mat-label\");\n        i0.ɵɵtext(22, \"Enter a date range\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"mat-date-range-input\", 10);\n        i0.ɵɵelement(24, \"input\", 11)(25, \"input\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"mat-hint\");\n        i0.ɵɵtext(27, \"MM/DD/YYYY \\u2013 MM/DD/YYYY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"mat-datepicker-toggle\", 13);\n        i0.ɵɵelementStart(29, \"mat-date-range-picker\", null, 14)(31, \"mat-date-range-picker-actions\")(32, \"button\", 15);\n        i0.ɵɵtext(33, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"button\", 16);\n        i0.ɵɵtext(35, \"Apply\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(36, \"div\", 5)(37, \"mat-form-field\", 9)(38, \"mat-select\", 17, 18)(40, \"mat-option\");\n        i0.ɵɵelement(41, \"ngx-mat-select-search\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(42, BookingComponent_mat_option_42_Template, 2, 2, \"mat-option\", 8);\n        i0.ɵɵpipe(43, \"async\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(44, \"mat-card-actions\")(45, \"div\", 20)(46, \"button\", 21);\n        i0.ɵɵtext(47, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function BookingComponent_Template_button_click_48_listener() {\n          return ctx.checkRoomAvailability(ctx.range.value, ctx.amenitiesMultiCtrl == null ? null : ctx.amenitiesMultiCtrl.value);\n        });\n        i0.ɵɵtext(49, \"View Available Rooms<\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(50, \"div\")(51, \"div\", 4)(52, \"div\", 23)(53, \"div\", 24);\n        i0.ɵɵtemplate(54, BookingComponent_mat_spinner_54_Template, 1, 0, \"mat-spinner\", 25);\n        i0.ɵɵpipe(55, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(56, BookingComponent_ng_template_56_Template, 2, 2, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        var _r1 = i0.ɵɵreference(30);\n\n        var _r5 = i0.ɵɵreference(57);\n\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.roomTypes);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"rangePicker\", _r1)(\"formGroup\", ctx.range);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"for\", _r1);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formControl\", ctx.amenitiesMultiCtrl)(\"multiple\", true);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formControl\", ctx.amenitiesMultiFilterCtrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(43, 10, ctx.filteredMulti));\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(55, 12, ctx.$loader))(\"ngIfElse\", _r5);\n      }\n    },\n    directives: [i3.MatCard, i3.MatCardHeader, i4.MatIcon, i3.MatCardAvatar, i3.MatCardTitle, i3.MatCardSubtitle, i3.MatCardContent, i5.MatFormField, i5.MatLabel, i6.MatSelect, i7.NgForOf, i8.MatOption, i9.MatDateRangeInput, i10.NgControlStatusGroup, i10.FormGroupDirective, i9.MatStartDate, i10.DefaultValueAccessor, i10.NgControlStatus, i10.FormControlName, i9.MatEndDate, i5.MatHint, i9.MatDatepickerToggle, i5.MatSuffix, i9.MatDateRangePicker, i9.MatDatepickerActions, i11.MatButton, i9.MatDatepickerCancel, i9.MatDatepickerApply, i10.FormControlDirective, i12.MatSelectSearchComponent, i3.MatCardActions, i7.NgIf, i13.MatSpinner, i14.MatChip],\n    pipes: [i7.AsyncPipe],\n    styles: [\"p[_ngcontent-%COMP%] {\\n  font-family: Lato;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: block;\\n  margin: 30px auto;\\n  padding: 0;\\n  overflow: hidden;\\n  border-width: 0;\\n  outline: none;\\n  border-radius: 2px;\\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);\\n  background-color: #2ecc71;\\n  color: #ecf0f1;\\n  transition: background-color 0.3s;\\n}\\n\\n.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus {\\n  background-color: #27ae60;\\n}\\n\\n.btn[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n\\n.btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  display: block;\\n  padding: 12px 24px;\\n}\\n\\n.btn[_ngcontent-%COMP%]:before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  display: block;\\n  width: 0;\\n  padding-top: 0;\\n  border-radius: 100%;\\n  background-color: rgba(236, 240, 241, 0.3);\\n  transform: translate(-50%, -50%);\\n}\\n\\n.btn[_ngcontent-%COMP%]:active:before {\\n  width: 120%;\\n  padding-top: 120%;\\n  transition: width 0.2s ease-out, padding-top 0.2s ease-out;\\n}\\n\\n\\n\\n*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after {\\n  box-sizing: border-box;\\n}\\n\\nhtml[_ngcontent-%COMP%] {\\n  position: relative;\\n  height: 100%;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  background-color: #ecf0f1;\\n  color: #34495e;\\n  font-family: Trebuchet, Arial, sans-serif;\\n  text-align: center;\\n}\\n\\nh2[_ngcontent-%COMP%] {\\n  font-weight: normal;\\n}\\n\\n.btn.orange[_ngcontent-%COMP%] {\\n  background-color: #e67e22;\\n}\\n\\n.btn.orange[_ngcontent-%COMP%]:hover, .btn.orange[_ngcontent-%COMP%]:focus {\\n  background-color: #d35400;\\n}\\n\\n.btn.red[_ngcontent-%COMP%] {\\n  background-color: #e74c3c;\\n}\\n\\n.btn.red[_ngcontent-%COMP%]:hover, .btn.red[_ngcontent-%COMP%]:focus {\\n  background-color: #c0392b;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtBQUNKOztBQUVFO0VBQ0Usa0JBQUE7RUFFQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxVQUFBO0VBRUEsZ0JBQUE7RUFFQSxlQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0Esd0NBQUE7RUFFQSx5QkFBQTtFQUNBLGNBQUE7RUFFQSxpQ0FBQTtBQUpKOztBQU9FO0VBQ0UseUJBQUE7QUFKSjs7QUFPRTtFQUNFLGtCQUFBO0FBSko7O0FBT0U7RUFDRSxjQUFBO0VBQ0Esa0JBQUE7QUFKSjs7QUFPRTtFQUNFLFdBQUE7RUFFQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBRUEsY0FBQTtFQUNBLFFBQUE7RUFDQSxjQUFBO0VBRUEsbUJBQUE7RUFFQSwwQ0FBQTtFQU1BLGdDQUFBO0FBVEo7O0FBWUU7RUFDRSxXQUFBO0VBQ0EsaUJBQUE7RUFFQSwwREFBQTtBQVZKOztBQWFFLDBCQUFBOztBQUNBO0VBQ0Usc0JBQUE7QUFWSjs7QUFhRTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtBQVZKOztBQWFFO0VBQ0Usa0JBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQU1BLGdDQUFBO0VBRUEseUJBQUE7RUFDQSxjQUFBO0VBQ0EseUNBQUE7RUFDQSxrQkFBQTtBQVpKOztBQWVFO0VBQ0UsbUJBQUE7QUFaSjs7QUFlRTtFQUNFLHlCQUFBO0FBWko7O0FBZUU7RUFDRSx5QkFBQTtBQVpKOztBQWVFO0VBQ0UseUJBQUE7QUFaSjs7QUFlRTtFQUNFLHlCQUFBO0FBWkoiLCJmaWxlIjoiYm9va2luZy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbInAge1xyXG4gICAgZm9udC1mYW1pbHk6IExhdG87XHJcbiAgfVxyXG5cclxuICAuYnRuIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIG1hcmdpbjogMzBweCBhdXRvO1xyXG4gICAgcGFkZGluZzogMDtcclxuXHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG5cclxuICAgIGJvcmRlci13aWR0aDogMDtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAwLCAwLCAuNik7XHJcblxyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzJlY2M3MTtcclxuICAgIGNvbG9yOiAjZWNmMGYxO1xyXG5cclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjNzO1xyXG4gIH1cclxuXHJcbiAgLmJ0bjpob3ZlciwgLmJ0bjpmb2N1cyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwO1xyXG4gIH1cclxuXHJcbiAgLmJ0biA+ICoge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIH1cclxuXHJcbiAgLmJ0biBzcGFuIHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgcGFkZGluZzogMTJweCAyNHB4O1xyXG4gIH1cclxuXHJcbiAgLmJ0bjpiZWZvcmUge1xyXG4gICAgY29udGVudDogXCJcIjtcclxuXHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIGxlZnQ6IDUwJTtcclxuXHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIHdpZHRoOiAwO1xyXG4gICAgcGFkZGluZy10b3A6IDA7XHJcblxyXG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxuXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzNiwgMjQwLCAyNDEsIC4zKTtcclxuXHJcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gICAgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgIC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbiAgfVxyXG5cclxuICAuYnRuOmFjdGl2ZTpiZWZvcmUge1xyXG4gICAgd2lkdGg6IDEyMCU7XHJcbiAgICBwYWRkaW5nLXRvcDogMTIwJTtcclxuXHJcbiAgICB0cmFuc2l0aW9uOiB3aWR0aCAuMnMgZWFzZS1vdXQsIHBhZGRpbmctdG9wIC4ycyBlYXNlLW91dDtcclxuICB9XHJcblxyXG4gIC8qIFN0eWxlcywgbm90IGltcG9ydGFudCAqL1xyXG4gICosICo6YmVmb3JlLCAqOmFmdGVyIHtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgfVxyXG5cclxuICBodG1sIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICB9XHJcblxyXG4gIGJvZHkge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICBsZWZ0OiA1MCU7XHJcblxyXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgIC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbiAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbiAgICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG5cclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlY2YwZjE7XHJcbiAgICBjb2xvcjogIzM0NDk1ZTtcclxuICAgIGZvbnQtZmFtaWx5OiBUcmVidWNoZXQsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgaDIge1xyXG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcclxuICB9XHJcblxyXG4gIC5idG4ub3JhbmdlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlNjdlMjI7XHJcbiAgfVxyXG5cclxuICAuYnRuLm9yYW5nZTpob3ZlciwgLmJ0bi5vcmFuZ2U6Zm9jdXMge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2QzNTQwMDtcclxuICB9XHJcblxyXG4gIC5idG4ucmVkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlNzRjM2M7XHJcbiAgfVxyXG5cclxuICAuYnRuLnJlZDpob3ZlciwgLmJ0bi5yZWQ6Zm9jdXMge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2MwMzkyYjtcclxuICB9Il19 */\"]\n  });\n  return BookingComponent;\n})();","map":{"version":3,"mappings":"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","names":["formatDate","FormControl","FormGroup","MatSelect","AuthService","RoomService","BehaviorSubject","ReplaySubject","Subject","takeUntil","Swal","i0","ctx_r15","BookingComponent","roomService","auth","start","end","getAmenities","getRoomsTypes","amenitiesMultiFilterCtrl","valueChanges","pipe","_onDestroy","subscribe","filterMulti","evt","roomTypeId","value","range","amenities","dataRange","newRanger","startDate","Date","endDate","map","amenity","Id","$loader","next","checkRoomAvailability","res","roomsAvailable","roomId","book","userId","getUserID","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","bookRoom","roomTypes","filteredMulti","complete","search","slice","toLowerCase","filter","bank","Name","indexOf","selectors","viewQuery","ctx","_r5"],"sourceRoot":"","sources":["C:\\Users\\sonkh\\2\\src\\app\\layouts\\guest-layout\\booking\\booking.component.ts","C:\\Users\\sonkh\\2\\src\\app\\layouts\\guest-layout\\booking\\booking.component.html"],"sourcesContent":["import { formatDate } from '@angular/common';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { MatSelect } from '@angular/material/select';\r\nimport { AuthService } from 'app/auth/auth.service';\r\nimport { RoomService } from 'app/services/room.service';\r\nimport { BehaviorSubject, ReplaySubject, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-booking',\r\n  templateUrl: './booking.component.html',\r\n  styleUrls: ['./booking.component.scss']\r\n})\r\nexport class BookingComponent implements OnInit {\r\n\r\n  roomTypes: any[] = [];\r\n  amenities: any[] = [];\r\n  selectedAmenities: number[] = [];\r\n\r\n\r\n  roomsAvailable: any = [];\r\n\r\n\r\n  roomTypeId: number;\r\n  range = new FormGroup({\r\n    start: new FormControl(''),\r\n    end: new FormControl(''),\r\n  });\r\n\r\n\r\n\r\n  /** control for the selected bank for multi-selection */\r\n  public amenitiesMultiCtrl: FormControl = new FormControl();\r\n\r\n  /** control for the MatSelect filter keyword multi-selection */\r\n  public amenitiesMultiFilterCtrl: FormControl = new FormControl();\r\n\r\n  /** list of banks filtered by search keyword */\r\n  public filteredMulti: ReplaySubject<any[]> = new ReplaySubject<any[]>(1);\r\n\r\n  public $loader: BehaviorSubject<any> = new BehaviorSubject<boolean>(false)\r\n\r\n\r\n\r\n  @ViewChild('multiSelect') multiSelect: MatSelect;\r\n\r\n  /** Subject that emits when the component has been destroyed. */\r\n  protected _onDestroy = new Subject<void>();\r\n\r\n  constructor(private roomService: RoomService, private auth: AuthService) { }\r\n\r\n  ngOnInit() {\r\n    this.getAmenities();\r\n    this.getRoomsTypes();\r\n    this.amenitiesMultiFilterCtrl.valueChanges\r\n      .pipe(takeUntil(this._onDestroy))\r\n      .subscribe(() => {\r\n        this.filterMulti();\r\n      });\r\n  }\r\n\r\n  onSelect(evt) {\r\n    this.roomTypeId = evt.value || null;\r\n  }\r\n\r\n\r\n  checkRoomAvailability(range: any, amenities: any[]) {\r\n    let dataRange = this.range.value\r\n    if (this.roomTypeId != null && dataRange.start != null && dataRange.end != null) {\r\n      {\r\n        const newRanger = {\r\n          startDate: formatDate(new Date(dataRange.start), 'yyyy/MM/dd hh:mm:ss', 'en_US'),\r\n          endDate: formatDate(new Date(dataRange.end), 'yyyy/MM/dd hh:mm:ss', 'en_US')\r\n        };\r\n        amenities = amenities.map(amenity => amenity.Id);\r\n        this.$loader.next(true);\r\n        this.roomService.checkRoomAvailability(this.roomTypeId, newRanger, amenities).subscribe(res => {\r\n          if (res) {\r\n            this.roomsAvailable = res;\r\n            this.$loader.next(false);\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n  Book(roomId) {\r\n    let dataRange = this.range.value;\r\n    const newRanger = {\r\n      startDate: formatDate(new Date(dataRange.start), 'yyyy/MM/dd hh:mm:ss', 'en_US'),\r\n      endDate: formatDate(new Date(dataRange.end), 'yyyy/MM/dd hh:mm:ss', 'en_US')\r\n    };\r\n    let book = {\r\n      roomId: roomId,\r\n      userId: this.auth.getUserID,\r\n      ...newRanger\r\n    }\r\n    Swal.fire({\r\n      title: 'Are you sure you want to book for',\r\n      text: `${newRanger.startDate} - ${newRanger.endDate}`,\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#ff0000',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Yes, book it!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.roomService.bookRoom(book).subscribe((result) => {\r\n          Swal.fire(\r\n            'Booked!',\r\n            'Room successfully booked.',\r\n            'success'\r\n          )\r\n\r\n        }, error => {\r\n\r\n        })\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  //function to get roomTypes\r\n  getRoomsTypes() {\r\n    this.roomService.getRoomsTypes().subscribe(res => {\r\n      this.roomTypes = res;\r\n    })\r\n  }\r\n  //function to get roomTypes\r\n  getAmenities() {\r\n    this.roomService.getAmenities().subscribe(res => {\r\n      this.filteredMulti.next(res);\r\n\r\n      this.amenities = res;\r\n    })\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._onDestroy.next();\r\n    this._onDestroy.complete();\r\n  }\r\n  protected filterMulti() {\r\n    if (!this.amenities) {\r\n      return;\r\n    }\r\n    // get the search keyword\r\n    let search = this.amenitiesMultiFilterCtrl.value;\r\n    if (!search) {\r\n      this.filteredMulti.next(this.amenities.slice());\r\n      return;\r\n    } else {\r\n      search = search.toLowerCase();\r\n    }\r\n    // filter the banks\r\n    this.filteredMulti.next(\r\n      this.amenities.filter(bank => bank.Name.toLowerCase().indexOf(search) > -1)\r\n    );\r\n  }\r\n}\r\n","<div class=\"main-content\">\r\n  <div class=\"container-fluid\">\r\n    <!-- <img src=\"./assets/logo-only.png\" alt=\"Hello\" class=\"img\"> -->\r\n    <mat-card class=\"example-card \">\r\n      <mat-card-header>\r\n        <mat-icon mat-card-avatar>house</mat-icon>\r\n        <mat-card-title>Check Rooms Available</mat-card-title>\r\n        <mat-card-subtitle>Select the parameters to filter the learners</mat-card-subtitle>\r\n      </mat-card-header>\r\n\r\n      <mat-card-content>\r\n        <div class=\"row\">\r\n          <div class=\"col\">\r\n            <div>\r\n              <mat-form-field class=\"m-2\">\r\n                <mat-label>Choose Room Type</mat-label>\r\n                <mat-select (selectionChange)=\"onSelect($event)\">\r\n                  <mat-option *ngFor=\"let item of roomTypes\" [value]=\"item.Id\">\r\n                    {{item.name}}\r\n                  </mat-option>\r\n                </mat-select>\r\n              </mat-form-field>\r\n            </div>\r\n          </div>\r\n          <div class=\"col\">\r\n            <mat-form-field appearance=\"fill\" class=\"example-form-field\">\r\n              <mat-label>Enter a date range</mat-label>\r\n              <mat-date-range-input [rangePicker]=\"rangePicker\" [formGroup]=\"range\">\r\n                <input matStartDate formControlName=\"start\" placeholder=\"Start date\">\r\n                <input matEndDate formControlName=\"end\" placeholder=\"End date\">\r\n              </mat-date-range-input>\r\n              <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>\r\n              <mat-datepicker-toggle matSuffix [for]=\"rangePicker\"></mat-datepicker-toggle>\r\n              <mat-date-range-picker #rangePicker>\r\n                <mat-date-range-picker-actions>\r\n                  <button mat-button matDateRangePickerCancel>Cancel</button>\r\n                  <button mat-raised-button color=\"primary\" matDateRangePickerApply>Apply</button>\r\n                </mat-date-range-picker-actions>\r\n              </mat-date-range-picker>\r\n            </mat-form-field>\r\n            <!-- <p>Selected range: {{range.value | json}}</p> -->\r\n          </div>\r\n          <div class=\"col\">\r\n\r\n\r\n            <mat-form-field appearance=\"fill\" class=\"example-form-field\">\r\n              <mat-select [formControl]=\"amenitiesMultiCtrl\" placeholder=\"Banks\" [multiple]=\"true\" #multiSelect>\r\n                <mat-option>\r\n                  <ngx-mat-select-search [formControl]=\"amenitiesMultiFilterCtrl\"></ngx-mat-select-search>\r\n\r\n                </mat-option>\r\n                <mat-option *ngFor=\"let amenity of filteredMulti | async\" [value]=\"amenity\">\r\n                  {{amenity.Name}}\r\n                </mat-option>\r\n              </mat-select>\r\n            </mat-form-field>\r\n            <!-- <ul *ngFor=\"let bank of amenitiesMultiCtrl?.value\">\r\n              <li>{{bank.Name}}</li>\r\n            </ul> -->\r\n          </div>\r\n        </div>\r\n      </mat-card-content>\r\n\r\n      <mat-card-actions>\r\n        <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\r\n          <button mat-stroked-button\r\n         >Cancel</button>\r\n          <button mat-raised-button color=\"warn\"    (click)=\"checkRoomAvailability(range.value,amenitiesMultiCtrl?.value)\">View Available Rooms<</button>\r\n        </div>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <div>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <div class=\"justify-content-between\">\r\n            <mat-spinner *ngIf=\"$loader | async as boolean;else cards\"></mat-spinner>\r\n          </div>\r\n          <ng-template #cards>\r\n            <ng-container *ngIf=\"roomsAvailable.length ==0\">\r\n              <div class=\"card\">\r\n                <h3>No rooms available for the selected days.</h3>\r\n              </div>\r\n            </ng-container>\r\n            <div class=\"card\" *ngFor=\"let room of roomsAvailable\">\r\n              <div class=\"card-header card-header-primary\">\r\n                <h4 class=\"card-title\">{{room.roomName}}</h4>\r\n                <p class=\"card-category\">\r\n                  <i class=\"material-icons text-danger\">warning</i>\r\n                  <a href=\"#pablo\">{{room.numberOfAvailableRooms}} Rooms Available</a>\r\n                </p>\r\n              </div>\r\n              <div class=\"card-body\">\r\n\r\n                <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\r\n                <mat-chip color=\"primary\" selected style=\"font-size: 16px; font-weight: bold;\">R{{room.rate}} Per Day</mat-chip>\r\n                </div>\r\n                <h5 class=\"card-title\">Amenities\r\n                </h5>\r\n                <ul *ngFor=\"let amenity of room.Amenities \">\r\n                  <li>{{amenity}}</li>\r\n                </ul>\r\n                <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\r\n                  <button mat-raised-button color=\"danger\"  (click)=\"Book(room.id)\" class=\"btn orange\">Book Room</button>\r\n              </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </ng-template>\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n    </div>\r\n  </div>\r\n</div>"]},"metadata":{},"sourceType":"module"}