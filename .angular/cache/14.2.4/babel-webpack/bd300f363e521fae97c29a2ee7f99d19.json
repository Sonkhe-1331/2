{"ast":null,"code":"import _classCallCheck from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ReplaySubject } from 'rxjs';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nexport var LazyLoadScriptService = /*#__PURE__*/(function () {\n  var LazyLoadScriptService = /*#__PURE__*/function () {\n    function LazyLoadScriptService(document) {\n      _classCallCheck(this, LazyLoadScriptService);\n\n      this.document = document;\n      this.loadedLibraries = {};\n    }\n\n    _createClass(LazyLoadScriptService, [{\n      key: \"loadScript\",\n      value: function loadScript(url) {\n        var _this = this;\n\n        if (this.loadedLibraries[url]) {\n          return this.loadedLibraries[url].asObservable();\n        }\n\n        this.loadedLibraries[url] = new ReplaySubject();\n        var script = this.document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = url;\n\n        script.onload = function () {\n          _this.loadedLibraries[url].next();\n\n          _this.loadedLibraries[url].complete();\n        };\n\n        this.document.body.appendChild(script);\n        return this.loadedLibraries[url].asObservable();\n      }\n    }]);\n\n    return LazyLoadScriptService;\n  }();\n\n  LazyLoadScriptService.ɵfac = function LazyLoadScriptService_Factory(t) {\n    return new (t || LazyLoadScriptService)(i0.ɵɵinject(DOCUMENT));\n  };\n\n  LazyLoadScriptService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: LazyLoadScriptService,\n    factory: LazyLoadScriptService.ɵfac\n  });\n  return LazyLoadScriptService;\n})();","map":{"version":3,"mappings":";;AACA,SAASA,aAAT,QAA0C,MAA1C;AACA,SAASC,QAAT,QAAyB,iBAAzB;;AAGA,WAAaC,qBAAb;EAAA,IAAaA,qBAAb;IAGI,+BAA+CC,QAA/C,EAAiE;MAAA;;MAAlB;MAF/C,uBAA0D,EAA1D;IAEsE;;IAH1E;MAAA;MAAA,OAKI,oBAAWC,GAAX,EAAsB;QAAA;;QAClB,IAAI,KAAKC,eAAL,CAAqBD,GAArB,CAAJ,EAA+B;UAC3B,OAAO,KAAKC,eAAL,CAAqBD,GAArB,EAA0BE,YAA1B,EAAP;QACH;;QAED,KAAKD,eAAL,CAAqBD,GAArB,IAA4B,IAAIJ,aAAJ,EAA5B;QAEA,IAAMO,MAAM,GAAG,KAAKJ,QAAL,CAAcK,aAAd,CAA4B,QAA5B,CAAf;QACAD,MAAM,CAACE,IAAP,GAAc,iBAAd;QACAF,MAAM,CAACG,GAAP,GAAaN,GAAb;;QACAG,MAAM,CAACI,MAAP,GAAgB,YAAK;UACjB,KAAI,CAACN,eAAL,CAAqBD,GAArB,EAA0BQ,IAA1B;;UACA,KAAI,CAACP,eAAL,CAAqBD,GAArB,EAA0BS,QAA1B;QACH,CAHD;;QAKA,KAAKV,QAAL,CAAcW,IAAd,CAAmBC,WAAnB,CAA+BR,MAA/B;QAEA,OAAO,KAAKF,eAAL,CAAqBD,GAArB,EAA0BE,YAA1B,EAAP;MACH;IAvBL;;IAAA;EAAA;;;qBAAaJ,uBAAqBc,YAGVf,QAHU;EAGF;;;WAHnBC;IAAqBe,SAArBf,qBAAqB;;EAAlC,OAAaA,qBAAb;AAAA","names":["ReplaySubject","DOCUMENT","LazyLoadScriptService","document","url","loadedLibraries","asObservable","script","createElement","type","src","onload","next","complete","body","appendChild","i0","factory"],"sourceRoot":"","sources":["C:\\Users\\sonkh\\2\\src\\app\\services\\lazy-load-script.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { ReplaySubject, Observable } from 'rxjs';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class LazyLoadScriptService {\r\n    loadedLibraries: { [url: string]: ReplaySubject<void> } = {};\r\n\r\n    constructor(@Inject(DOCUMENT) private readonly document: Document) { }\r\n\r\n    loadScript(url: string): Observable<void> {\r\n        if (this.loadedLibraries[url]) {\r\n            return this.loadedLibraries[url].asObservable();\r\n        }\r\n\r\n        this.loadedLibraries[url] = new ReplaySubject();\r\n\r\n        const script = this.document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = url;\r\n        script.onload = () => {\r\n            this.loadedLibraries[url].next();\r\n            this.loadedLibraries[url].complete();\r\n        };\r\n\r\n        this.document.body.appendChild(script);\r\n\r\n        return this.loadedLibraries[url].asObservable();\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}