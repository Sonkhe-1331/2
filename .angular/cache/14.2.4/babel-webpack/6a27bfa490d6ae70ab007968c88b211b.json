{"ast":null,"code":"import _classCallCheck from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LazyLoadScriptService } from 'app/services/lazy-load-script.service';\nimport { AuthService } from '../auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/lazy-load-script.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../auth.service\";\nexport var LoginComponent = /*#__PURE__*/function () {\n  function LoginComponent(lazyLoadService, router, fb, auth) {\n    _classCallCheck(this, LoginComponent);\n\n    this.lazyLoadService = lazyLoadService;\n    this.router = router;\n    this.fb = fb;\n    this.auth = auth;\n  }\n\n  _createClass(LoginComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      // if (sessionStorage.getItem('id') != null) { // but must be != null\n      //   this.router.navigateByUrl('/dashboard');\n      // }\n      this.formModel = this.fb.group({\n        Email: ['', Validators.required],\n        Password: ['', Validators.required]\n      });\n      this.lazyLoadService.loadScript('/assets/jquery.min.js').subscribe(function (_) {\n        console.log('Jquery is loaded!');\n\n        _this.loadJS();\n      });\n    } // onSubmit() {\n    //     this.router.navigate(['dashboard']);\n    // }\n\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var _this2 = this;\n\n      console.log('onSubmit');\n      this.auth.login(this.formModel.value).subscribe(function (res) {\n        if (res === 400 || res === null) {// this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\n        }\n\n        console.log(res);\n        localStorage.setItem('token', res.token);\n\n        _this2.auth.setUserID(res.User_ID);\n\n        _this2.auth.setUserRole(res.role);\n\n        _this2.auth.setLoggedin(true); //  this.toastr.success('You have successfully logged in.', 'Authentication success.', {timeOut: 2222});\n\n\n        _this2.auth.setUserType(res.type);\n\n        var routes = [\"dummy\", 'owner/dashboard', 'guest/dashboard', 'clerk/dashboard'];\n\n        _this2.router.navigateByUrl(routes[_this2.auth.getUserRole]);\n      }, function (err) {\n        if (err.status === 400 || err.status === null) {// this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\n        } else {\n          console.log(err);\n        }\n      });\n    }\n  }, {\n    key: \"register\",\n    value: function register() {\n      this.router.navigate(['register']);\n    }\n  }, {\n    key: \"loadJS\",\n    value: function loadJS() {\n      $(\".login-form\").hide();\n      $(\".login\").css(\"background\", \"none\");\n      $(\".login\").click(function () {\n        $(\".signup-form\").hide();\n        $(\".login-form\").show();\n        $(\".signup\").css(\"background\", \"none\");\n        $(\".login\").css(\"background\", \"#fff\");\n      });\n      $(\".signup\").click(function () {\n        $(\".signup-form\").show();\n        $(\".login-form\").hide();\n        $(\".login\").css(\"background\", \"none\");\n        $(\".signup\").css(\"background\", \"#fff\");\n      });\n      $(\".btn\").click(function () {\n        $(\".input\").val(\"\");\n      });\n    }\n  }]);\n\n  return LoginComponent;\n}();\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.LazyLoadScriptService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.AuthService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 19,\n  vars: 2,\n  consts: [[\"src\", \"https://travelji.com/wp-content/uploads/Hotel-Tips.jpg\", \"alt\", \"Hello\", 1, \"img\"], [1, \"wrapper\"], [1, \"container\"], [1, \"signup\", 3, \"click\"], [1, \"login\"], [\"autocomplete\", \"off\", 3, \"formGroup\", \"submit\"], [1, \"login-form\"], [\"type\", \"text\", \"formControlName\", \"Email\", \"placeholder\", \"Email or Username\", 1, \"input\"], [\"type\", \"password\", \"formControlName\", \"Password\", \"placeholder\", \"Password\", 1, \"input\"], [\"type\", \"submit\", 1, \"btn\", 3, \"disabled\"], [\"href\", \"#\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelement(1, \"img\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_4_listener() {\n        return ctx.register();\n      });\n      i0.ɵɵtext(5, \"Sign Up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵtext(7, \"Log In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"form\", 5);\n      i0.ɵɵlistener(\"submit\", function LoginComponent_Template_form_submit_8_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelement(10, \"input\", 7)(11, \"br\")(12, \"input\", 8)(13, \"br\");\n      i0.ɵɵelementStart(14, \"button\", 9);\n      i0.ɵɵtext(15, \"log in\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"span\")(17, \"a\", 10);\n      i0.ɵɵtext(18, \"I forgot my username or password.\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.formModel);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"disabled\", !ctx.formModel.valid);\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName],\n  styles: [\"*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  background: #e9eaea;\\n  font-family: roboto;\\n  -webkit-user-select: none;\\n          user-select: none;\\n}\\n\\n.img[_ngcontent-%COMP%] {\\n  min-height: 100%;\\n  min-width: 1024px;\\n  \\n  width: 100%;\\n  height: 70%;\\n  \\n  position: fixed;\\n  top: 4em;\\n  left: 0;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  width: 450px;\\n  margin: 30px auto;\\n}\\n\\n.signup[_ngcontent-%COMP%], .login[_ngcontent-%COMP%] {\\n  width: 50%;\\n  background: #fff;\\n  float: left;\\n  height: 60px;\\n  line-height: 60px;\\n  text-align: center;\\n  cursor: pointer;\\n  text-transform: uppercase;\\n}\\n\\n.signup-form[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%] {\\n  background: #fff;\\n  padding: 40px;\\n  clear: both;\\n  width: 100%;\\n  box-sizing: border-box;\\n  height: 400px;\\n}\\n\\n.input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 20px;\\n  box-sizing: border-box;\\n  margin-bottom: 25px;\\n  border: 2px solid #e9eaea;\\n  color: #3e3e40;\\n  font-size: 14px;\\n  outline: none;\\n  transform: all 0.5s ease;\\n}\\n\\n.input[_ngcontent-%COMP%]:focus {\\n  border: 2px solid #34b3a0;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  background: #34b3a0;\\n  height: 60px;\\n  text-align: center;\\n  line-height: 60px;\\n  text-transform: uppercase;\\n  color: #fff;\\n  font-weight: bold;\\n  letter-spacing: 1px;\\n  cursor: pointer;\\n  margin-bottom: 30px;\\n}\\n\\nspan[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: #000;\\n}\\n\\n[_ngcontent-%COMP%]::-webkit-input-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]::-moz-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]:-ms-input-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]:-moz-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n\\n\\n.youtube[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 10px;\\n  right: 10px;\\n  width: 160px;\\n  text-align: center;\\n  padding: 15px 10px;\\n  background: #bb0000;\\n  border-radius: 5px;\\n}\\n\\n.youtube[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: #fff;\\n  text-transform: capitalize;\\n  letter-spacing: 1px;\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}