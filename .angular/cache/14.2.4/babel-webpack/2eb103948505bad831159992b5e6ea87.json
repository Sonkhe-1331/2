{"ast":null,"code":"import _classCallCheck from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/sonkh/2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LazyLoadScriptService } from 'app/services/lazy-load-script.service';\nimport { AuthService } from '../auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/services/lazy-load-script.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../auth.service\";\nexport var LoginComponent = /*#__PURE__*/(function () {\n  var LoginComponent = /*#__PURE__*/function () {\n    function LoginComponent(lazyLoadService, router, fb, auth) {\n      _classCallCheck(this, LoginComponent);\n\n      this.lazyLoadService = lazyLoadService;\n      this.router = router;\n      this.fb = fb;\n      this.auth = auth;\n    }\n\n    _createClass(LoginComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        // if (sessionStorage.getItem('id') != null) { // but must be != null\n        //   this.router.navigateByUrl('/dashboard');\n        // }\n        this.formModel = this.fb.group({\n          Email: ['', Validators.required],\n          Password: ['', Validators.required]\n        });\n        this.lazyLoadService.loadScript('/assets/jquery.min.js').subscribe(function (_) {\n          console.log('Jquery is loaded!');\n\n          _this.loadJS();\n        });\n      } // onSubmit() {\n      //     this.router.navigate(['dashboard']);\n      // }\n\n    }, {\n      key: \"onSubmit\",\n      value: function onSubmit() {\n        var _this2 = this;\n\n        console.log('onSubmit');\n        this.auth.login(this.formModel.value).subscribe(function (res) {\n          if (res === 400 || res === null) {// this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\n          }\n\n          console.log(res);\n          localStorage.setItem('token', res.token);\n\n          _this2.auth.setUserID(res.User_ID);\n\n          _this2.auth.setUserRole(res.role);\n\n          _this2.auth.setLoggedin(true); //  this.toastr.success('You have successfully logged in.', 'Authentication success.', {timeOut: 2222});\n\n\n          _this2.auth.setUserType(res.type);\n\n          var routes = [\"dummy\", 'owner/dashboard', 'guest/dashboard', 'clerk/dashboard'];\n\n          _this2.router.navigateByUrl(routes[_this2.auth.getUserRole]);\n        }, function (err) {\n          if (err.status === 400 || err.status === null) {// this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\n          } else {\n            console.log(err);\n          }\n        });\n      }\n    }, {\n      key: \"register\",\n      value: function register() {\n        this.router.navigate(['register']);\n      }\n    }, {\n      key: \"loadJS\",\n      value: function loadJS() {\n        $(\".login-form\").hide();\n        $(\".login\").css(\"background\", \"none\");\n        $(\".login\").click(function () {\n          $(\".signup-form\").hide();\n          $(\".login-form\").show();\n          $(\".signup\").css(\"background\", \"none\");\n          $(\".login\").css(\"background\", \"#fff\");\n        });\n        $(\".signup\").click(function () {\n          $(\".signup-form\").show();\n          $(\".login-form\").hide();\n          $(\".login\").css(\"background\", \"none\");\n          $(\".signup\").css(\"background\", \"#fff\");\n        });\n        $(\".btn\").click(function () {\n          $(\".input\").val(\"\");\n        });\n      }\n    }]);\n\n    return LoginComponent;\n  }();\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.LazyLoadScriptService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.AuthService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 19,\n    vars: 2,\n    consts: [[\"src\", \"https://travelji.com/wp-content/uploads/Hotel-Tips.jpg\", \"alt\", \"Hello\", 1, \"img\"], [1, \"wrapper\"], [1, \"container\"], [1, \"signup\", 3, \"click\"], [1, \"login\"], [\"autocomplete\", \"off\", 3, \"formGroup\", \"submit\"], [1, \"login-form\"], [\"type\", \"text\", \"formControlName\", \"Email\", \"placeholder\", \"Email or Username\", 1, \"input\"], [\"type\", \"password\", \"formControlName\", \"Password\", \"placeholder\", \"Password\", 1, \"input\"], [\"type\", \"submit\", 1, \"btn\", 3, \"disabled\"], [\"href\", \"#\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelement(1, \"img\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_div_click_4_listener() {\n          return ctx.register();\n        });\n        i0.ɵɵtext(5, \"Sign Up\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵtext(7, \"Log In\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"form\", 5);\n        i0.ɵɵlistener(\"submit\", function LoginComponent_Template_form_submit_8_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelement(10, \"input\", 7)(11, \"br\")(12, \"input\", 8)(13, \"br\");\n        i0.ɵɵelementStart(14, \"button\", 9);\n        i0.ɵɵtext(15, \"log in\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"span\")(17, \"a\", 10);\n        i0.ɵɵtext(18, \"I forgot my username or password.\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.formModel);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"disabled\", !ctx.formModel.valid);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName],\n    styles: [\"*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  background: #e9eaea;\\n  font-family: roboto;\\n  -webkit-user-select: none;\\n          user-select: none;\\n}\\n\\n.img[_ngcontent-%COMP%] {\\n  min-height: 100%;\\n  min-width: 1024px;\\n  \\n  width: 100%;\\n  height: 70%;\\n  \\n  position: fixed;\\n  top: 4em;\\n  left: 0;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  width: 450px;\\n  margin: 30px auto;\\n}\\n\\n.signup[_ngcontent-%COMP%], .login[_ngcontent-%COMP%] {\\n  width: 50%;\\n  background: #fff;\\n  float: left;\\n  height: 60px;\\n  line-height: 60px;\\n  text-align: center;\\n  cursor: pointer;\\n  text-transform: uppercase;\\n}\\n\\n.signup-form[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%] {\\n  background: #fff;\\n  padding: 40px;\\n  clear: both;\\n  width: 100%;\\n  box-sizing: border-box;\\n  height: 400px;\\n}\\n\\n.input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 20px;\\n  box-sizing: border-box;\\n  margin-bottom: 25px;\\n  border: 2px solid #e9eaea;\\n  color: #3e3e40;\\n  font-size: 14px;\\n  outline: none;\\n  transform: all 0.5s ease;\\n}\\n\\n.input[_ngcontent-%COMP%]:focus {\\n  border: 2px solid #34b3a0;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  background: #34b3a0;\\n  height: 60px;\\n  text-align: center;\\n  line-height: 60px;\\n  text-transform: uppercase;\\n  color: #fff;\\n  font-weight: bold;\\n  letter-spacing: 1px;\\n  cursor: pointer;\\n  margin-bottom: 30px;\\n}\\n\\nspan[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: #000;\\n}\\n\\n[_ngcontent-%COMP%]::-webkit-input-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]::-moz-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]:-ms-input-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n[_ngcontent-%COMP%]:-moz-placeholder { \\n  color: #3e3e40;\\n  font-family: roboto;\\n}\\n\\n\\n\\n.youtube[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 10px;\\n  right: 10px;\\n  width: 160px;\\n  text-align: center;\\n  padding: 15px 10px;\\n  background: #bb0000;\\n  border-radius: 5px;\\n}\\n\\n.youtube[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: #fff;\\n  text-transform: capitalize;\\n  letter-spacing: 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksU0FBQTtFQUNBLFVBQUE7QUFDSjs7QUFFRTtFQUNFLG1CQUFBO0VBQ0EsbUJBQUE7RUFDQSx5QkFBQTtVQUFBLGlCQUFBO0FBQ0o7O0FBR0E7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBRUEsaUNBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUVBLHVCQUFBO0VBQ0EsZUFBQTtFQUNBLFFBQUE7RUFDQSxPQUFBO0FBRkY7O0FBS0U7RUFDRSxZQUFBO0VBQ0EsaUJBQUE7QUFGSjs7QUFLRTs7RUFFRSxVQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7QUFGSjs7QUFLRTs7RUFFRSxnQkFBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLHNCQUFBO0VBQ0EsYUFBQTtBQUZKOztBQUtFO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EseUJBQUE7RUFDQSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSx3QkFBQTtBQUZKOztBQUtFO0VBQ0UseUJBQUE7QUFGSjs7QUFLRTtFQUNFLFdBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxtQkFBQTtBQUZKOztBQUtFO0VBQ0UscUJBQUE7RUFDQSxXQUFBO0FBRko7O0FBS0UsOEJBQUEsd0JBQUE7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7QUFGSjs7QUFJRSxxQkFBQSxnQkFBQTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtBQURKOztBQUdFLHlCQUFBLFdBQUE7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7QUFBSjs7QUFFRSxvQkFBQSxnQkFBQTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtBQUNKOztBQXFCRSxpQkFBQTs7QUFDQTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtBQWxCSjs7QUFxQkU7RUFDRSxxQkFBQTtFQUNBLFdBQUE7RUFDQSwwQkFBQTtFQUNBLG1CQUFBO0FBbEJKIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiKntcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgfVxyXG5cclxuICBib2R5e1xyXG4gICAgYmFja2dyb3VuZDogI2U5ZWFlYTtcclxuICAgIGZvbnQtZmFtaWx5OiByb2JvdG87XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICB9XHJcblxyXG4gIFxyXG4uaW1ne1xyXG4gIG1pbi1oZWlnaHQ6IDEwMCU7XHJcbiAgbWluLXdpZHRoOiAxMDI0cHg7XHJcbiAgICBcclxuICAvKiBTZXQgdXAgcHJvcG9ydGlvbmF0ZSBzY2FsaW5nICovXHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiA3MCU7XHJcbiAgICBcclxuICAvKiBTZXQgdXAgcG9zaXRpb25pbmcgKi9cclxuICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgdG9wOiA0ZW07XHJcbiAgbGVmdDogMDtcclxufVxyXG5cclxuICAuY29udGFpbmVye1xyXG4gICAgd2lkdGg6IDQ1MHB4O1xyXG4gICAgbWFyZ2luOiAzMHB4IGF1dG87XHJcbiAgfVxyXG5cclxuICAuc2lnbnVwLFxyXG4gIC5sb2dpbntcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgZmxvYXQ6IGxlZnQ7XHJcbiAgICBoZWlnaHQ6IDYwcHg7XHJcbiAgICBsaW5lLWhlaWdodDogNjBweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgfVxyXG5cclxuICAuc2lnbnVwLWZvcm0sXHJcbiAgLmxvZ2luLWZvcm17XHJcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgcGFkZGluZzogNDBweDtcclxuICAgIGNsZWFyOiBib3RoO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgaGVpZ2h0OiA0MDBweDtcclxuICB9XHJcblxyXG4gIC5pbnB1dHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgI2U5ZWFlYTtcclxuICAgIGNvbG9yOiAjM2UzZTQwO1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHRyYW5zZm9ybTogYWxsIDAuNXMgZWFzZTtcclxuICB9XHJcblxyXG4gIC5pbnB1dDpmb2N1c3tcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkICMzNGIzYTA7XHJcbiAgfVxyXG5cclxuICAuYnRue1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kOiAjMzRiM2EwO1xyXG4gICAgaGVpZ2h0OiA2MHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbGluZS1oZWlnaHQ6IDYwcHg7XHJcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gIH1cclxuXHJcbiAgc3BhbiBhe1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgY29sb3I6ICMwMDA7XHJcbiAgfVxyXG5cclxuICA6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgeyAvKiBDaHJvbWUvT3BlcmEvU2FmYXJpICovXHJcbiAgICBjb2xvcjogIzNlM2U0MDtcclxuICAgIGZvbnQtZmFtaWx5OiByb2JvdG87XHJcbiAgfVxyXG4gIDo6LW1vei1wbGFjZWhvbGRlciB7IC8qIEZpcmVmb3ggMTkrICovXHJcbiAgICBjb2xvcjogIzNlM2U0MDtcclxuICAgIGZvbnQtZmFtaWx5OiByb2JvdG87XHJcbiAgfVxyXG4gIDotbXMtaW5wdXQtcGxhY2Vob2xkZXIgeyAvKiBJRSAxMCsgKi9cclxuICAgIGNvbG9yOiAjM2UzZTQwO1xyXG4gICAgZm9udC1mYW1pbHk6IHJvYm90bztcclxuICB9XHJcbiAgOi1tb3otcGxhY2Vob2xkZXIgeyAvKiBGaXJlZm94IDE4LSAqL1xyXG4gICAgY29sb3I6ICMzZTNlNDA7XHJcbiAgICBmb250LWZhbWlseTogcm9ib3RvO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gIC8qIHlvdXR1YmUgbGluayAqL1xyXG4gIC55b3V0dWJle1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiAxMHB4O1xyXG4gICAgcmlnaHQ6IDEwcHg7XHJcbiAgICB3aWR0aDogMTYwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAxNXB4IDEwcHg7XHJcbiAgICBiYWNrZ3JvdW5kOiAjYmIwMDAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIH1cclxuXHJcbiAgLnlvdXR1YmUgYXtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogMXB4O1xyXG4gIH0iXX0= */\"]\n  });\n  return LoginComponent;\n})();","map":{"version":3,"mappings":"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","names":["FormBuilder","Validators","Router","LazyLoadScriptService","AuthService","LoginComponent","lazyLoadService","router","fb","auth","formModel","group","Email","required","Password","loadScript","subscribe","_","console","log","loadJS","login","value","res","localStorage","setItem","token","setUserID","User_ID","setUserRole","role","setLoggedin","setUserType","type","routes","navigateByUrl","getUserRole","err","status","navigate","$","hide","css","click","show","val","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\sonkh\\2\\src\\app\\auth\\login\\login.component.ts","C:\\Users\\sonkh\\2\\src\\app\\auth\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { LazyLoadScriptService } from 'app/services/lazy-load-script.service';\r\nimport { AuthService } from '../auth.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  formModel: FormGroup;\r\n\r\n  constructor(private lazyLoadService: LazyLoadScriptService, private router: Router,private fb: FormBuilder,private auth: AuthService) { }\r\n\r\n  ngOnInit() {\r\n    // if (sessionStorage.getItem('id') != null) { // but must be != null\r\n    //   this.router.navigateByUrl('/dashboard');\r\n    // }\r\n    this.formModel = this.fb.group({\r\n      Email: ['', Validators.required],\r\n      Password: ['', Validators.required],\r\n    });\r\n\r\n    this.lazyLoadService.loadScript('/assets/jquery.min.js').subscribe((_) => {\r\n      console.log('Jquery is loaded!');\r\n      this.loadJS();\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // onSubmit() {\r\n  //     this.router.navigate(['dashboard']);\r\n  // }\r\n\r\n  onSubmit() {\r\n    console.log('onSubmit')\r\n    this.auth.login(this.formModel.value).subscribe(\r\n      (res: any) => {\r\n        if (res === 400 || res === null) {\r\n          // this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\r\n          }\r\n        console.log(res);\r\n        localStorage.setItem('token', res.token);\r\n       this.auth.setUserID(res.User_ID);\r\n       this.auth.setUserRole(res.role);\r\n\r\n       this.auth.setLoggedin(true);\r\n      //  this.toastr.success('You have successfully logged in.', 'Authentication success.', {timeOut: 2222});\r\n       this.auth.setUserType(res.type);\r\n\r\n       let routes  = [\"dummy\", 'owner/dashboard','guest/dashboard','clerk/dashboard'];\r\n\r\n       this.router.navigateByUrl(routes[this.auth.getUserRole]);\r\n\r\n\r\n\r\n      },\r\n      err => {\r\n        if (err.status === 400 || err.status === null) {\r\n          // this.toastr.error('Incorrect username or password.', 'Authentication failed.', { timeOut: 2222, });\r\n        } else {\r\n          console.log(err);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  register() {\r\n    this.router.navigate(['register']);\r\n}\r\n\r\n\r\nloadJS() {\r\n  $(\".login-form\").hide();\r\n  $(\".login\").css(\"background\", \"none\");\r\n\r\n  $(\".login\").click(function(){\r\n    $(\".signup-form\").hide();\r\n    $(\".login-form\").show();\r\n    $(\".signup\").css(\"background\", \"none\");\r\n    $(\".login\").css(\"background\", \"#fff\");\r\n  });\r\n\r\n  $(\".signup\").click(function(){\r\n    $(\".signup-form\").show();\r\n    $(\".login-form\").hide();\r\n    $(\".login\").css(\"background\", \"none\");\r\n    $(\".signup\").css(\"background\", \"#fff\");\r\n  });\r\n\r\n  $(\".btn\").click(function(){\r\n    $(\".input\").val(\"\");\r\n  });\r\n}\r\n}\r\n","<div>\r\n  <img src=\"https://travelji.com/wp-content/uploads/Hotel-Tips.jpg\" alt=\"Hello\" class=\"img\">\r\n<div class=\"wrapper\">\r\n\r\n  <div class=\"container\">\r\n\r\n    <div class=\"signup\" (click)=\"register()\">Sign Up</div>\r\n    <div class=\"login\">Log In</div>\r\n    <form [formGroup]=\"formModel\" autocomplete=\"off\" (submit)=\"onSubmit()\">\r\n    <div class=\"login-form\">\r\n        <input type=\"text\"  formControlName=\"Email\" placeholder=\"Email or Username\" class=\"input\"><br />\r\n        <input type=\"password\"  formControlName=\"Password\" placeholder=\"Password\" class=\"input\"><br />\r\n        <button class=\"btn\"  type=\"submit\"  [disabled]=\"!formModel.valid\">log in</button>\r\n        <span><a href=\"#\">I forgot my username or password.</a></span>\r\n     </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n</div>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}